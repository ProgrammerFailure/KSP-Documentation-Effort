<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Kerbal Space Program: VesselPrecalculate Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doc_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ksp_logo_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kerbal Space Program
   &#160;<span id="projectnumber">1.12.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_vessel_precalculate-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">VesselPrecalculate Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is the counterpart to <a class="el" href="class_flight_integrator.html" title="This script adds all external forces to the ship parts. ">FlightIntegrator</a>. As FI runs after most other FixedUpdate things run and finally applies all physics changes for the frame prior to passing off to the integrator, this runs at the start of the frame and precalculates the values for the fixed frame, like CoM, vessel velocity and angular velocity, the force of gravity (and any drift compensation), vessel acceleration/G forces, and the like. It also will set position and rotation when on rails, or if off rails recompute the orbit based on those stats calculated. It handles being off rails specially: it will do its final update for any given UT in <a class="el" href="class_vessel_precalculate.html#abbf9ea5f60fa657f8398d3570723bcfa" title="Used for loaded/unpacked vessels so display matches physics. Runs most of what FixedUpdate does...">Update()</a> rather than <a class="el" href="class_vessel_precalculate.html#a1cb04b0160682ef049f0657841772141">FixedUpdate()</a> so the calculated pos/vel/etc stats for the vessel are correct for visual display. When on rails, nothing changes in PhysX integration so there is no need to run later. Note that so long as this is running, it tells the vessel's <a class="el" href="class_orbit_driver.html">OrbitDriver</a> not to do anything, and instead directly calls <a class="el" href="class_orbit_driver.html">OrbitDriver</a>'s Update methods. This is because when off rails, orbit updating needs to occur after we determine vessel CoM and velocity, whereas when on rails, we need to update from the orbit before we calculate CoM and velocity.  
 <a href="class_vessel_precalculate.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for VesselPrecalculate:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_vessel_precalculate.png" usemap="#VesselPrecalculate_map" alt=""/>
  <map id="VesselPrecalculate_map" name="VesselPrecalculate_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a777bff9e57bd34907dab33c92804c386"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a777bff9e57bd34907dab33c92804c386">ApplyVelocityCorrection</a> ()</td></tr>
<tr class="memdesc:a777bff9e57bd34907dab33c92804c386"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the velocity correction from drift compensation (if any).  <a href="#a777bff9e57bd34907dab33c92804c386">More...</a><br /></td></tr>
<tr class="separator:a777bff9e57bd34907dab33c92804c386"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2d02f2fd2f864ca104c2000f09ae86c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#ac2d02f2fd2f864ca104c2000f09ae86c">Awake</a> ()</td></tr>
<tr class="separator:ac2d02f2fd2f864ca104c2000f09ae86c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a931477aedeb6a64e370d2f7c13b0285e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a931477aedeb6a64e370d2f7c13b0285e">CalculateGravity</a> ()</td></tr>
<tr class="memdesc:a931477aedeb6a64e370d2f7c13b0285e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the force of gravity, using drift compensation if in orbit and the compensation is better than not. Ease gravity coming off rails while landed/splashed.  <a href="#a931477aedeb6a64e370d2f7c13b0285e">More...</a><br /></td></tr>
<tr class="separator:a931477aedeb6a64e370d2f7c13b0285e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a594089a9f2d4fdea29841c9e87e616e1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a594089a9f2d4fdea29841c9e87e616e1">CalculatePhysicsStats</a> ()</td></tr>
<tr class="memdesc:a594089a9f2d4fdea29841c9e87e616e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will calculate center of mass and total mass, mass-weighted average linear and angular velocity, moment of inertia, and angular momentum Depends on <a class="el" href="class_flight_integrator.html" title="This script adds all external forces to the ship parts. ">FlightIntegrator</a> setting part.physicsMass. If vessel is unloaded, use traditional calculations based off stored values and root part.  <a href="#a594089a9f2d4fdea29841c9e87e616e1">More...</a><br /></td></tr>
<tr class="separator:a594089a9f2d4fdea29841c9e87e616e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cb04b0160682ef049f0657841772141"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a1cb04b0160682ef049f0657841772141">FixedUpdate</a> ()</td></tr>
<tr class="separator:a1cb04b0160682ef049f0657841772141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c5c3018b1f1dfe58fcd75558768cb1e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a3c5c3018b1f1dfe58fcd75558768cb1e">GoOffRails</a> ()</td></tr>
<tr class="memdesc:a3c5c3018b1f1dfe58fcd75558768cb1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by <a class="el" href="class_vessel.html#a62c2f48e73bda7e0a4c345084ac29c41" title="puts the ship back into a simulated orbit and reenables physics ">Vessel.GoOffRails</a>  <a href="#a3c5c3018b1f1dfe58fcd75558768cb1e">More...</a><br /></td></tr>
<tr class="separator:a3c5c3018b1f1dfe58fcd75558768cb1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d4313c1623ab6fbf9aba30797886c7"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a69d4313c1623ab6fbf9aba30797886c7">GoOnRails</a> ()</td></tr>
<tr class="memdesc:a69d4313c1623ab6fbf9aba30797886c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by <a class="el" href="class_vessel.html#a5b433bea63b0e877ae7ae5c691d06d36" title="disables physics and puts the ship into a propagated orbit ">Vessel.GoOnRails</a>. Clears any post-integration velocity offset.  <a href="#a69d4313c1623ab6fbf9aba30797886c7">More...</a><br /></td></tr>
<tr class="separator:a69d4313c1623ab6fbf9aba30797886c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe249ab5d72f54b96927d239ab905978"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#abe249ab5d72f54b96927d239ab905978">MainPhysics</a> (bool doKillChecks)</td></tr>
<tr class="memdesc:abe249ab5d72f54b96927d239ab905978"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does the main physics calls. Run from fixed update. Bits run in Update.  <a href="#abe249ab5d72f54b96927d239ab905978">More...</a><br /></td></tr>
<tr class="separator:abe249ab5d72f54b96927d239ab905978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff7cbd8f1a9f87efdec157982fb044d7"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#aff7cbd8f1a9f87efdec157982fb044d7">OnDestroy</a> ()</td></tr>
<tr class="separator:aff7cbd8f1a9f87efdec157982fb044d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a718e58c1f89bbff1fea82c303d8fa682"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a718e58c1f89bbff1fea82c303d8fa682">RunFirst</a> ()</td></tr>
<tr class="memdesc:a718e58c1f89bbff1fea82c303d8fa682"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run when a vessel initializes in flight  <a href="#a718e58c1f89bbff1fea82c303d8fa682">More...</a><br /></td></tr>
<tr class="separator:a718e58c1f89bbff1fea82c303d8fa682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e8cad1d9998ede70cb9a47c5d3a460a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a0e8cad1d9998ede70cb9a47c5d3a460a">SetLandedPosRot</a> ()</td></tr>
<tr class="memdesc:a0e8cad1d9998ede70cb9a47c5d3a460a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This will update pos/rot if landed/splashed and on rails  <a href="#a0e8cad1d9998ede70cb9a47c5d3a460a">More...</a><br /></td></tr>
<tr class="separator:a0e8cad1d9998ede70cb9a47c5d3a460a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbf9ea5f60fa657f8398d3570723bcfa"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#abbf9ea5f60fa657f8398d3570723bcfa">Update</a> ()</td></tr>
<tr class="memdesc:abbf9ea5f60fa657f8398d3570723bcfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used for loaded/unpacked vessels so display matches physics. Runs most of what FixedUpdate does. However, it does so with zero time offset and does not calc gravity (that happens in next fixed frame). Finally, it signals to next fixed frame it doesn't have to rerun this stuff  <a href="#abbf9ea5f60fa657f8398d3570723bcfa">More...</a><br /></td></tr>
<tr class="separator:abbf9ea5f60fa657f8398d3570723bcfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8671875d819167df7f58d3c33b55045b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a8671875d819167df7f58d3c33b55045b">calculateGravity</a> = true</td></tr>
<tr class="separator:a8671875d819167df7f58d3c33b55045b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1c1ae4192e8632cf602530342260c2c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_vector3d.html">Vector3d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#aa1c1ae4192e8632cf602530342260c2c">coriolis</a></td></tr>
<tr class="memdesc:aa1c1ae4192e8632cf602530342260c2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The fictitious forces for when in a rotating frame  <a href="#aa1c1ae4192e8632cf602530342260c2c">More...</a><br /></td></tr>
<tr class="separator:aa1c1ae4192e8632cf602530342260c2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65399df02cb53c4a8eca39fdbb7f3a4d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a65399df02cb53c4a8eca39fdbb7f3a4d">easingFrameIncrease</a> = (1d / 16d)</td></tr>
<tr class="memdesc:a65399df02cb53c4a8eca39fdbb7f3a4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The proportional increase in g each tick. Default: 1/16th, so 16 frames of easing.  <a href="#a65399df02cb53c4a8eca39fdbb7f3a4d">More...</a><br /></td></tr>
<tr class="separator:a65399df02cb53c4a8eca39fdbb7f3a4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3f74f8af5d403667e715812ad494370"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#ac3f74f8af5d403667e715812ad494370">fDeltaTime</a></td></tr>
<tr class="separator:ac3f74f8af5d403667e715812ad494370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a205294018874c69ee656e92d8a211815"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_vector3d.html">Vector3d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a205294018874c69ee656e92d8a211815">gAccel</a></td></tr>
<tr class="memdesc:a205294018874c69ee656e92d8a211815"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acceleration passed to <a class="el" href="class_vessel.html" title="Vessels define individual ships in flight. They work essentially as a header for the set of parts tha...">Vessel</a> for calculating perturbation/g force  <a href="#a205294018874c69ee656e92d8a211815">More...</a><br /></td></tr>
<tr class="separator:a205294018874c69ee656e92d8a211815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb6115c8a0a6189f30ee44101fb503a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_vector3d.html">Vector3d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#acb6115c8a0a6189f30ee44101fb503a7">gAccelTrue</a></td></tr>
<tr class="memdesc:acb6115c8a0a6189f30ee44101fb503a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The true acceleration of gravity at this instant, minus any fictitious or drift-correcting force  <a href="#acb6115c8a0a6189f30ee44101fb503a7">More...</a><br /></td></tr>
<tr class="separator:acb6115c8a0a6189f30ee44101fb503a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d9faba89908e8b5cf153d0acafc5758"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_vector3d.html">Vector3d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a1d9faba89908e8b5cf153d0acafc5758">integrationAccel</a></td></tr>
<tr class="memdesc:a1d9faba89908e8b5cf153d0acafc5758"><td class="mdescLeft">&#160;</td><td class="mdescRight">The acceleration passed to PhysX (when not correcting drift)  <a href="#a1d9faba89908e8b5cf153d0acafc5758">More...</a><br /></td></tr>
<tr class="separator:a1d9faba89908e8b5cf153d0acafc5758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9726b76d552e5df8344fa76624fbf0f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_orbit_driver.html#abfb41796b3c54130184353d55649d598">OrbitDriver.UpdateMode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a9726b76d552e5df8344fa76624fbf0f8">lastMode</a></td></tr>
<tr class="separator:a9726b76d552e5df8344fa76624fbf0f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afef17e064c7c9cce6b63e29ca5ee8cba"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#afef17e064c7c9cce6b63e29ca5ee8cba">packedInFixed</a> = true</td></tr>
<tr class="memdesc:afef17e064c7c9cce6b63e29ca5ee8cba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Was the vessel packed in the last fixed frame?  <a href="#afef17e064c7c9cce6b63e29ca5ee8cba">More...</a><br /></td></tr>
<tr class="separator:afef17e064c7c9cce6b63e29ca5ee8cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139455f93c074c63af007393cd75e967"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a139455f93c074c63af007393cd75e967">physStatsNotDoneInUpdate</a> = true</td></tr>
<tr class="memdesc:a139455f93c074c63af007393cd75e967"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, runs phys calcs in FixedUpdate, if false we already did them in Update (post-integration) and don't need to rerun.  <a href="#a139455f93c074c63af007393cd75e967">More...</a><br /></td></tr>
<tr class="separator:a139455f93c074c63af007393cd75e967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1fd822fd7e39a0264f8aba3229eb63b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_vector3d.html">Vector3d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#aa1fd822fd7e39a0264f8aba3229eb63b">postIntegrationVelocityCorrection</a> = <a class="el" href="struct_vector3d.html#ab5cc094f7c0af75948624cae1840bf43">Vector3d.zero</a></td></tr>
<tr class="memdesc:aa1fd822fd7e39a0264f8aba3229eb63b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The velocity changes to apply, pre and post integration (if correcting drift)  <a href="#aa1fd822fd7e39a0264f8aba3229eb63b">More...</a><br /></td></tr>
<tr class="separator:aa1fd822fd7e39a0264f8aba3229eb63b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af05066550c0a95591b79a7e882017b28"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#af05066550c0a95591b79a7e882017b28">railsSetPosRot</a> = true</td></tr>
<tr class="separator:af05066550c0a95591b79a7e882017b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa648bfeca35eca6bd63826f8b441bfa1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#aa648bfeca35eca6bd63826f8b441bfa1">ranFixedThisFrame</a> = true</td></tr>
<tr class="memdesc:aa648bfeca35eca6bd63826f8b441bfa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The reverse: did we do them in Fixed this frame?  <a href="#aa648bfeca35eca6bd63826f8b441bfa1">More...</a><br /></td></tr>
<tr class="separator:aa648bfeca35eca6bd63826f8b441bfa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc2479b718f8d4b524ff6c4b1c7a7b8c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#afc2479b718f8d4b524ff6c4b1c7a7b8c">updateOrbit</a> = true</td></tr>
<tr class="separator:afc2479b718f8d4b524ff6c4b1c7a7b8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a8567f96887fe078779521113d36cf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a01a8567f96887fe078779521113d36cf">wasCorrectingDrift</a> = false</td></tr>
<tr class="memdesc:a01a8567f96887fe078779521113d36cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Were we correcting drift?  <a href="#a01a8567f96887fe078779521113d36cf">More...</a><br /></td></tr>
<tr class="separator:a01a8567f96887fe078779521113d36cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4051b5f1c1aa57ca393d0e012310806e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_vector3d.html">Vector3d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a4051b5f1c1aa57ca393d0e012310806e">worldSurfacePos</a></td></tr>
<tr class="separator:a4051b5f1c1aa57ca393d0e012310806e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9512f8131df5cfbfc586949cab494eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_unity_engine_1_1_quaternion_d.html">QuaternionD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#ac9512f8131df5cfbfc586949cab494eb">worldSurfaceRot</a></td></tr>
<tr class="separator:ac9512f8131df5cfbfc586949cab494eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a1bd8ea595263e1e21a2740f520a22d76"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a1bd8ea595263e1e21a2740f520a22d76">allowDriftCompensation</a> = true</td></tr>
<tr class="separator:a1bd8ea595263e1e21a2740f520a22d76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a02e40714f118f51548f7696138131"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a50a02e40714f118f51548f7696138131">disableRunInUpdate</a> = false</td></tr>
<tr class="separator:a50a02e40714f118f51548f7696138131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f5014330a0bbf36df75deaae56419d3"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a0f5014330a0bbf36df75deaae56419d3">driftAlwaysPassThreshChecks</a> = false</td></tr>
<tr class="separator:a0f5014330a0bbf36df75deaae56419d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ad38f55b13395c44a76c002d7833c3c48"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#ad38f55b13395c44a76c002d7833c3c48">StartEasing</a> ()</td></tr>
<tr class="separator:ad38f55b13395c44a76c002d7833c3c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc0b5c2cbebe38665d4b4f8cfa1423de"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#adc0b5c2cbebe38665d4b4f8cfa1423de">StopEasing</a> ()</td></tr>
<tr class="separator:adc0b5c2cbebe38665d4b4f8cfa1423de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ae67446e2d02298f8c4031092ee3904f2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#ae67446e2d02298f8c4031092ee3904f2">correctDriftThisFrame</a> = false</td></tr>
<tr class="memdesc:ae67446e2d02298f8c4031092ee3904f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell Pre to correct velocity on the next frame (or in Update)  <a href="#ae67446e2d02298f8c4031092ee3904f2">More...</a><br /></td></tr>
<tr class="separator:ae67446e2d02298f8c4031092ee3904f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a761dd052ba38b4541f37ebcb15a72bb4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a761dd052ba38b4541f37ebcb15a72bb4">easing</a> = false</td></tr>
<tr class="memdesc:a761dd052ba38b4541f37ebcb15a72bb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Are we easing?  <a href="#a761dd052ba38b4541f37ebcb15a72bb4">More...</a><br /></td></tr>
<tr class="separator:a761dd052ba38b4541f37ebcb15a72bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8a8bb32d33bd46ab86bebec5aa1119"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a2f8a8bb32d33bd46ab86bebec5aa1119">easingLockOn</a> = false</td></tr>
<tr class="memdesc:a2f8a8bb32d33bd46ab86bebec5aa1119"><td class="mdescLeft">&#160;</td><td class="mdescRight">Did we set a control lock?  <a href="#a2f8a8bb32d33bd46ab86bebec5aa1119">More...</a><br /></td></tr>
<tr class="separator:a2f8a8bb32d33bd46ab86bebec5aa1119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85f284e45a35c2e218e7a6ac90a65b48"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a85f284e45a35c2e218e7a6ac90a65b48">framesUntilCorrect</a> = 0</td></tr>
<tr class="separator:a85f284e45a35c2e218e7a6ac90a65b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b733bf6e234451a97e4771667b82e1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a65b733bf6e234451a97e4771667b82e1">lastUT</a></td></tr>
<tr class="memdesc:a65b733bf6e234451a97e4771667b82e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The last UT the <a class="el" href="class_vessel_precalculate.html#abbf9ea5f60fa657f8398d3570723bcfa" title="Used for loaded/unpacked vessels so display matches physics. Runs most of what FixedUpdate does...">Update()</a> update ran in. For detecting pause.  <a href="#a65b733bf6e234451a97e4771667b82e1">More...</a><br /></td></tr>
<tr class="separator:a65b733bf6e234451a97e4771667b82e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb78df2d01a88e41c8e9fd03cfa3da5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_vector3d.html">Vector3d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#afdb78df2d01a88e41c8e9fd03cfa3da5">railsPosNext</a></td></tr>
<tr class="separator:afdb78df2d01a88e41c8e9fd03cfa3da5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4645ab2136f781a233c08eb999186cd6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_vessel.html">Vessel</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a4645ab2136f781a233c08eb999186cd6">vessel</a></td></tr>
<tr class="separator:a4645ab2136f781a233c08eb999186cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a3d8a76ce2ead51f97ac677575143ada0"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a3d8a76ce2ead51f97ac677575143ada0">isEasingGravity</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a3d8a76ce2ead51f97ac677575143ada0"><td class="mdescLeft">&#160;</td><td class="mdescRight">publicly accessible Easing property  <a href="#a3d8a76ce2ead51f97ac677575143ada0">More...</a><br /></td></tr>
<tr class="separator:a3d8a76ce2ead51f97ac677575143ada0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37477ebb718a8b4af14582d6c32668be"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_vessel.html">Vessel</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vessel_precalculate.html#a37477ebb718a8b4af14582d6c32668be">Vessel</a><code> [get]</code></td></tr>
<tr class="separator:a37477ebb718a8b4af14582d6c32668be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the counterpart to <a class="el" href="class_flight_integrator.html" title="This script adds all external forces to the ship parts. ">FlightIntegrator</a>. As FI runs after most other FixedUpdate things run and finally applies all physics changes for the frame prior to passing off to the integrator, this runs at the start of the frame and precalculates the values for the fixed frame, like CoM, vessel velocity and angular velocity, the force of gravity (and any drift compensation), vessel acceleration/G forces, and the like. It also will set position and rotation when on rails, or if off rails recompute the orbit based on those stats calculated. It handles being off rails specially: it will do its final update for any given UT in <a class="el" href="class_vessel_precalculate.html#abbf9ea5f60fa657f8398d3570723bcfa" title="Used for loaded/unpacked vessels so display matches physics. Runs most of what FixedUpdate does...">Update()</a> rather than <a class="el" href="class_vessel_precalculate.html#a1cb04b0160682ef049f0657841772141">FixedUpdate()</a> so the calculated pos/vel/etc stats for the vessel are correct for visual display. When on rails, nothing changes in PhysX integration so there is no need to run later. Note that so long as this is running, it tells the vessel's <a class="el" href="class_orbit_driver.html">OrbitDriver</a> not to do anything, and instead directly calls <a class="el" href="class_orbit_driver.html">OrbitDriver</a>'s Update methods. This is because when off rails, orbit updating needs to occur after we determine vessel CoM and velocity, whereas when on rails, we need to update from the orbit before we calculate CoM and velocity. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a777bff9e57bd34907dab33c92804c386"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.ApplyVelocityCorrection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies the velocity correction from drift compensation (if any). </p>

</div>
</div>
<a class="anchor" id="ac2d02f2fd2f864ca104c2000f09ae86c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.Awake </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a931477aedeb6a64e370d2f7c13b0285e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.CalculateGravity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the force of gravity, using drift compensation if in orbit and the compensation is better than not. Ease gravity coming off rails while landed/splashed. </p>
<p>&lt; convert inertial to rotational reference frame</p>
<p>&lt; Calculate gravitic acceleration as difference between current velocity and velocity after integration (i.e. at start of next fixed frame).</p>
<p>&lt; for use in GotRotFrameVel </p>

</div>
</div>
<a class="anchor" id="a594089a9f2d4fdea29841c9e87e616e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.CalculatePhysicsStats </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will calculate center of mass and total mass, mass-weighted average linear and angular velocity, moment of inertia, and angular momentum Depends on <a class="el" href="class_flight_integrator.html" title="This script adds all external forces to the ship parts. ">FlightIntegrator</a> setting part.physicsMass. If vessel is unloaded, use traditional calculations based off stored values and root part. </p>
<p>&lt; set by FI based on physicsless children</p>
<p>&lt; add the part inertiaTensor to the ship inertiaTensor</p>
<p>&lt; add the part mass to the ship inertiaTensor</p>
<p>&lt; add the part distance offset to the ship inertiaTensor</p>
<p>&lt; was just set before.</p>
<p>&lt; was set at start of our run </p>

</div>
</div>
<a class="anchor" id="a1cb04b0160682ef049f0657841772141"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VesselPrecalculate.FixedUpdate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3c5c3018b1f1dfe58fcd75558768cb1e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.GoOffRails </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by <a class="el" href="class_vessel.html#a62c2f48e73bda7e0a4c345084ac29c41" title="puts the ship back into a simulated orbit and reenables physics ">Vessel.GoOffRails</a> </p>

</div>
</div>
<a class="anchor" id="a69d4313c1623ab6fbf9aba30797886c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.GoOnRails </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by <a class="el" href="class_vessel.html#a5b433bea63b0e877ae7ae5c691d06d36" title="disables physics and puts the ship into a propagated orbit ">Vessel.GoOnRails</a>. Clears any post-integration velocity offset. </p>

</div>
</div>
<a class="anchor" id="abe249ab5d72f54b96927d239ab905978"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.MainPhysics </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>doKillChecks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Does the main physics calls. Run from fixed update. Bits run in Update. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doKillChecks</td><td>Do we check if the vessel should be killed?</td></tr>
  </table>
  </dd>
</dl>
<p>&lt; if it's already queued, don't worry about it</p>
<p>&lt; Handle orbit fixups and rails positioning and anything from the prior frame</p>
<p>&lt; Clean up state from the prior frame</p>
<p>&lt; assume we don't have to correct</p>
<p>&lt; Calculate vessel COM and velocity for the current pos and rb velocities.</p>
<p>&lt; Calculate the gravity that will be integrated (or just stored if on rails) this frame.</p>
<p>&lt; Calculate the gravity that will be integrated (or just stored if on rails) this frame.</p>
<p>&lt; Run <a class="el" href="class_vessel.html" title="Vessels define individual ships in flight. They work essentially as a header for the set of parts tha...">Vessel</a>'s fixedupdate code that checks if we should die</p>
<p>&lt; reset so if &gt;1 fixed frame per update loop we don't skip the above! </p>

</div>
</div>
<a class="anchor" id="aff7cbd8f1a9f87efdec157982fb044d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.OnDestroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>&lt; in case we set this and we die but orbitdriver doesn't. </p>

</div>
</div>
<a class="anchor" id="a718e58c1f89bbff1fea82c303d8fa682"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.RunFirst </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run when a vessel initializes in flight </p>

</div>
</div>
<a class="anchor" id="a0e8cad1d9998ede70cb9a47c5d3a460a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.SetLandedPosRot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This will update pos/rot if landed/splashed and on rails </p>
<p>&lt; don't set pos here since we set pos right after. </p>

</div>
</div>
<a class="anchor" id="ad38f55b13395c44a76c002d7833c3c48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.StartEasing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="adc0b5c2cbebe38665d4b4f8cfa1423de"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.StopEasing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="abbf9ea5f60fa657f8398d3570723bcfa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VesselPrecalculate.Update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used for loaded/unpacked vessels so display matches physics. Runs most of what FixedUpdate does. However, it does so with zero time offset and does not calc gravity (that happens in next fixed frame). Finally, it signals to next fixed frame it doesn't have to rerun this stuff </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a1bd8ea595263e1e21a2740f520a22d76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.allowDriftCompensation = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8671875d819167df7f58d3c33b55045b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.calculateGravity = true</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa1c1ae4192e8632cf602530342260c2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_vector3d.html">Vector3d</a> VesselPrecalculate.coriolis</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The fictitious forces for when in a rotating frame </p>

</div>
</div>
<a class="anchor" id="ae67446e2d02298f8c4031092ee3904f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.correctDriftThisFrame = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tell Pre to correct velocity on the next frame (or in Update) </p>

</div>
</div>
<a class="anchor" id="a50a02e40714f118f51548f7696138131"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.disableRunInUpdate = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0f5014330a0bbf36df75deaae56419d3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.driftAlwaysPassThreshChecks = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a761dd052ba38b4541f37ebcb15a72bb4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.easing = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Are we easing? </p>

</div>
</div>
<a class="anchor" id="a65399df02cb53c4a8eca39fdbb7f3a4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double VesselPrecalculate.easingFrameIncrease = (1d / 16d)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The proportional increase in g each tick. Default: 1/16th, so 16 frames of easing. </p>

</div>
</div>
<a class="anchor" id="a2f8a8bb32d33bd46ab86bebec5aa1119"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.easingLockOn = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Did we set a control lock? </p>

</div>
</div>
<a class="anchor" id="ac3f74f8af5d403667e715812ad494370"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double VesselPrecalculate.fDeltaTime</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a85f284e45a35c2e218e7a6ac90a65b48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VesselPrecalculate.framesUntilCorrect = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a205294018874c69ee656e92d8a211815"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_vector3d.html">Vector3d</a> VesselPrecalculate.gAccel</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acceleration passed to <a class="el" href="class_vessel.html" title="Vessels define individual ships in flight. They work essentially as a header for the set of parts tha...">Vessel</a> for calculating perturbation/g force </p>

</div>
</div>
<a class="anchor" id="acb6115c8a0a6189f30ee44101fb503a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_vector3d.html">Vector3d</a> VesselPrecalculate.gAccelTrue</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The true acceleration of gravity at this instant, minus any fictitious or drift-correcting force </p>

</div>
</div>
<a class="anchor" id="a1d9faba89908e8b5cf153d0acafc5758"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_vector3d.html">Vector3d</a> VesselPrecalculate.integrationAccel</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The acceleration passed to PhysX (when not correcting drift) </p>

</div>
</div>
<a class="anchor" id="a9726b76d552e5df8344fa76624fbf0f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_orbit_driver.html#abfb41796b3c54130184353d55649d598">OrbitDriver.UpdateMode</a> VesselPrecalculate.lastMode</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a65b733bf6e234451a97e4771667b82e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double VesselPrecalculate.lastUT</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The last UT the <a class="el" href="class_vessel_precalculate.html#abbf9ea5f60fa657f8398d3570723bcfa" title="Used for loaded/unpacked vessels so display matches physics. Runs most of what FixedUpdate does...">Update()</a> update ran in. For detecting pause. </p>

</div>
</div>
<a class="anchor" id="afef17e064c7c9cce6b63e29ca5ee8cba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.packedInFixed = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Was the vessel packed in the last fixed frame? </p>

</div>
</div>
<a class="anchor" id="a139455f93c074c63af007393cd75e967"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.physStatsNotDoneInUpdate = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If true, runs phys calcs in FixedUpdate, if false we already did them in Update (post-integration) and don't need to rerun. </p>

</div>
</div>
<a class="anchor" id="aa1fd822fd7e39a0264f8aba3229eb63b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_vector3d.html">Vector3d</a> VesselPrecalculate.postIntegrationVelocityCorrection = <a class="el" href="struct_vector3d.html#ab5cc094f7c0af75948624cae1840bf43">Vector3d.zero</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The velocity changes to apply, pre and post integration (if correcting drift) </p>

</div>
</div>
<a class="anchor" id="afdb78df2d01a88e41c8e9fd03cfa3da5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_vector3d.html">Vector3d</a> VesselPrecalculate.railsPosNext</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af05066550c0a95591b79a7e882017b28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.railsSetPosRot = true</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa648bfeca35eca6bd63826f8b441bfa1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.ranFixedThisFrame = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The reverse: did we do them in Fixed this frame? </p>

</div>
</div>
<a class="anchor" id="afc2479b718f8d4b524ff6c4b1c7a7b8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.updateOrbit = true</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4645ab2136f781a233c08eb999186cd6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_vessel.html">Vessel</a> VesselPrecalculate.vessel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a01a8567f96887fe078779521113d36cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool VesselPrecalculate.wasCorrectingDrift = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Were we correcting drift? </p>

</div>
</div>
<a class="anchor" id="a4051b5f1c1aa57ca393d0e012310806e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_vector3d.html">Vector3d</a> VesselPrecalculate.worldSurfacePos</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac9512f8131df5cfbfc586949cab494eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_unity_engine_1_1_quaternion_d.html">QuaternionD</a> VesselPrecalculate.worldSurfaceRot</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a class="anchor" id="a3d8a76ce2ead51f97ac677575143ada0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool VesselPrecalculate.isEasingGravity</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>publicly accessible Easing property </p>

</div>
</div>
<a class="anchor" id="a37477ebb718a8b4af14582d6c32668be"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_vessel.html">Vessel</a> VesselPrecalculate.Vessel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>KSP/Assets/Scripts/Simulation Scripts/<a class="el" href="_vessel_precalculate_8cs.html">VesselPrecalculate.cs</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><div style="text-align: left;float:left;">API Download: <a href="./html.zip" target="_blank">HTML</a> | <a href="./xml.zip" target="_blank">XML</a></div><small>
Generated on Tue Nov 1 2022 18:36:17 for Kerbal Space Program by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
